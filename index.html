<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Core by mrchimp</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Core</h1>
        <p class="header">PDO connection and helper class</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/mrchimp/core/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/mrchimp/core/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/mrchimp/core">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/mrchimp">mrchimp</a></p>


      </header>
      <section>
        <h1>core.php</h1>

<p>Manages PDO connection and provides basic debugging functions.</p>

<h2>Installation</h2>

<ul>
<li> Put core/ into the root of your website.</li>
<li> Create a config file for your server by duplicating or renaming <strong>core/db_con/localhost-example.php</strong> to <strong>core/db_con/HOSTNAME.php</strong>. E.g. localhost.php or example.com.php</li>
<li> Update this file with your database connection details. Core comes with an empty sqlite database so to get going quickly all you need to do is set ROOT_DIR to the location of your web root directory on your server. Note: This is the local URL of your website, e.g. <strong>c:/websites/example/</strong> NOT <strong><a href="http://example.com/">http://example.com/</a></strong>
</li>
<li> Point your browser towards http://HOSTNAME/core/example.php</li>
<li> Scroll down and you will either see "everything worked!" or some errors.</li>
<li> If you have errors it's not my fault.</li>
</ul><h2>Usage</h2>

<p>Setting up core in your script:</p>

<pre><code>// Prevent direct access.
define('IN_SCRIPT', true);

// Include the class definition
require_once 'core.php';

// Instantiate
$core = Core::getInstance();
</code></pre>

<p>For further examples see core/example.php</p>

<h2>Computer says no</h2>

<p>This error is designed to not give any information away. If you want more information switch core into debug mode by doing this:</p>

<pre><code>$core = Core::getInstance();
$core-&gt;setDebug(true);
</code></pre>

<p><strong>Just don't leave debug mode on in production!</strong></p>

<h2>Public Methods</h2>

<h3>getInstance()</h3>

<p>Returns an instance of Core.</p>

<h3>executeSQL(string $sql, array $params = array())</h3>

<p>Executes an SQL query.</p>

<p>If the query is a SELECT query then an associative array will be returned. In all other cases a boolean is returned: true if the query was successful, false if not.</p>

<p>$params will be passed to <a href="http://php.net/manual/en/pdostatement.execute.php">PDO::execute()</a> so should be formatted appropriately.</p>

<h3>write($var, string $name='')</h3>

<p>For debugging purposes.</p>

<p>Dumps the contents of a variable between PRE tags. If $name is specified it will be written out first. Sometimes handy if you're using write() a lot.</p>

<h3>writeArrayNicely(array $array, bool $recurse=true)</h3>

<p>For debugging purposes.</p>

<p>Takes an array and writes it in nested divs with greyscale backgrounds representing the depth within the array. Works with n-dimension arrays. </p>

<p>Set $recurse to false to prevent it writing out the contents of arrays within the array.</p>

<p>Note: A hack is included to allow $GLOBALS to be passed to this function - anything with the key 'GLOBALS' will not be written out.</p>

<h3>startTimer()</h3>

<p>Starts the timer.</p>

<h3>getTime(string $what = null)</h3>

<p>Returns the number of seconds elapsed since startTimer() was called. Returned value is a float to millisecond accuracy.</p>

<h3>logEventTime($event_name)</h3>

<p>Logs the time taken since startTimer() was called to the log file defined in the config file.</p>

<h3>logEvent(string $message, int $type)</h3>

<p>Logs an error to the file specified in db_con/HOSTNAME.php. If $type is 5 then emails the error to the email address specified in the above file.</p>

<pre><code>$type:
1 = Information
2 = Audit
3 = Security
4 = Debug
5 = Error
</code></pre>

<h3>mailSend(string $subject, string $mailBody, string $from)</h3>

<p>Sends an email to the email address specified in db_con/HOSTNAME.php.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>